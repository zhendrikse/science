<style>
    html, body {
        background: #131313;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
        height: 100%;
    }

    #glowscript-wrapper {
        display: block;
        position: relative;
        width: 100%;
        max-width: 800px;
        aspect-ratio: 4 / 3;
        margin: auto;
    }

    .glowscript canvas {
        display: block;
        touch-action: none;
        width: 100%;
        height: 100%;
    }
</style>
<script>
    // Disable MathJax within GlowScript library
    // if (window.MathJax && !MathJax.Hub) {
    //     MathJax.Hub = {
    //         Configured: function(){},
    //         Config: function(){},
    //         Queue: function(){},
    //         Typeset: function(){}
    //     };
    // }
</script>
<div id="glowscript-wrapper">
    <div id="glowscript" class="glowscript"></div>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" href="https://www.glowscript.org/css/redmond/2.1/jquery-ui.custom.css" rel="stylesheet" />
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/package/glow.3.2.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/package/RSrun.3.2.min.js"></script>
<script type="text/javascript"><!--//--><![CDATA[//><!--

// START JAVASCRIPT
;(function() {;
var ρσ_modules = {};
ρσ_modules.pythonize = {};

(function(){
    function strings() {
        var string_funcs, exclude, name;
        string_funcs = set("capitalize strip lstrip rstrip islower isupper isspace lower upper swapcase center count endswith startswith find rfind index rindex format join ljust rjust partition rpartition replace split rsplit splitlines zfill".split(" "));
        if (!arguments.length) {
            exclude = (function(){
                var s = ρσ_set();
                s.jsset.add("split");
                s.jsset.add("replace");
                return s;
            })();
        } else if (arguments[0]) {
            exclude = Array.prototype.slice.call(arguments);
        } else {
            exclude = null;
        }
        if (exclude) {
            string_funcs = string_funcs.difference(set(exclude));
        }
        var ρσ_Iter0 = string_funcs;
        ρσ_Iter0 = ((typeof ρσ_Iter0[Symbol.iterator] === "function") ? (ρσ_Iter0 instanceof Map ? ρσ_Iter0.keys() : ρσ_Iter0) : Object.keys(ρσ_Iter0));
        for (var ρσ_Index0 of ρσ_Iter0) {
            name = ρσ_Index0;
            (ρσ_expr_temp = String.prototype)[(typeof name === "number" && name < 0) ? ρσ_expr_temp.length + name : name] = (ρσ_expr_temp = ρσ_str.prototype)[(typeof name === "number" && name < 0) ? ρσ_expr_temp.length + name : name];
        }
    };
    if (!strings.__module__) Object.defineProperties(strings, {
        __module__ : {value: "pythonize"}
    });

    ρσ_modules.pythonize.strings = strings;
})();

async function __main__() {
"use strict";
    var display = canvas;
    var scene = canvas();

    function round(num, n=0) {return Number(num.toFixed(n))}
    var arrow, box, compound, cone, cylinder, ellipsoid, extrusion, helix, points, pyramid, ring, simple_sphere, group, vector, sleep, update, paths, shapes, vertex, triangle, quad, label, distant_light, local_light, attach_trail, attach_arrow, attach_light, tan, asin, acos, atan, atan2, exp, log, pow, factorial, combin, radio, text, download, radians, degrees, get_library, read_local_file
    var version, print, arange, __name__, type, ρσ_ls, title, display, stars, _GS_1, schwarzschild, sun, ρσ_unpack, r_min, r_max, start_r, position, comet, flat_motion_comet, _, delta_t;
    version = ρσ_list_decorate([ "3.2", "glowscript" ]);
    Array.prototype['+'] = function(r) {return this.concat(r)}
    Array.prototype['*'] = function(r) {return __array_times_number(this, r)}
    window.__GSlang = "vpython";
    print = GSprint;
    arange = range;
    __name__ = "__main__";
    type = pytype;
    var strings = ρσ_modules.pythonize.strings;

    strings();
    "9";
    title = "&#x2022; Original <a href=\"https://www.glowscript.org/#/user/Luinthoron/folder/English/program/embedding-diagram\">idea &amp; code<\/a> by M. Ryston (Department of Physics Education)\n&#x2022; Faculty of Mathematics and Physics, Charles University,Prague, Czech Republic\n&#x2022; Described in <a href=\"https://iopscience.iop.org/article/10.1088/1742-6596/1286/1/012049\">Interactive animations as a tool in teaching general relativity [...]</a>\n&#x2022; Refactored by <a href=\"https://www.hendrikse.name/\">Zeger Hendrikse</a> in <a href=\"https://github.com/zhendrikse/science/blob/main/relativity/code/schwarzschild_space_time.py\">schwarzschild_space_time.py</a>\n\n";
    "11";
    display = ρσ_interpolate_kwargs.call(this, canvas, [ρσ_desugar_kwargs({title: title, width: 600, height: 450, background: color.gray(.075), forward: vec(0, 1["-u"]()["*"](.75), 1["-u"]()["*"](.85)), range: 80})]);
    "12";
    stars = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vec(0, 0, 0), texture: "https://www.hendrikse.name/science/astrophysics/images/textures/universe.jpg", radius: 200, shininess: 0, opacity: .5})]);
    "13";
    ρσ_interpolate_kwargs.call(stars, stars.rotate, [ρσ_desugar_kwargs({angle: pi["/"](2), axis: vec(0, 1, 0)})]);
    "18";
    function Sun() {;
    }
    Sun.prototype.__init__ = async function __init__() {
        var self = this;
        var position = ( 0 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true) ? undefined : arguments[0];
        var radius = (arguments[1] === undefined || ( 1 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true)) ? __init__.__defaults__.radius : arguments[1];
        var ρσ_kwargs_obj = arguments[arguments.length["-"](1)];
        if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== "object" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};
        if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, "radius")){
            radius = ρσ_kwargs_obj.radius;
        }
        "20";
        self._sun = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: position, radius: radius, texture: "https://www.hendrikse.name/science/astrophysics/images/textures/sun.jpg", visible: true})]);
    };
    if (!Sun.prototype.__init__.__defaults__) Object.defineProperties(Sun.prototype.__init__, {
        __defaults__ : {value: {radius:.8}},
        __handles_kwarg_interpolation__ : {value: true},
        __argnames__ : {value: ["position", "radius"]},
        __module__ : {value: null}
    });
    Sun.__argnames__ = Sun.prototype.__init__.__argnames__;
    Sun.__handles_kwarg_interpolation__ = Sun.prototype.__init__.__handles_kwarg_interpolation__;
    Sun.prototype.visibility_is = async function visibility_is(checked) {
        var self = this;
        "25";
        self._sun.visible = checked;
    };
    if (!Sun.prototype.visibility_is.__argnames__) Object.defineProperties(Sun.prototype.visibility_is, {
        __argnames__ : {value: ["checked"]},
        __module__ : {value: null}
    });
    Sun.prototype.__repr__ = async function __repr__() {
                return "<"["+"](__name__)["+"](".")["+"](this.constructor.name)["+"](" #")["+"](this.ρσ_object_id)["+"](">");
    };
    Sun.prototype.__str__ = async function __str__() {
        return this.__repr__();
    };
    Object.defineProperty(Sun.prototype, "__bases__", {value: []});



    "28";
    function Comet() {;
    }
    Comet.prototype.__init__ = async function __init__() {
        var self = this;
        var start_position = ( 0 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true) ? undefined : arguments[0];
        var radius = ( 1 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true) ? undefined : arguments[1];
        var colour = ( 2 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true) ? undefined : arguments[2];
        var sour = (arguments[3] === undefined || ( 3 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true)) ? __init__.__defaults__.sour : arguments[3];
        var ρσ_kwargs_obj = arguments[arguments.length["-"](1)];
        if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== "object" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};
        if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, "sour")){
            sour = ρσ_kwargs_obj.sour;
        }
        "30";
        self._sphere = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: start_position, radius: radius, color: colour, visible: true, make_trail: true, trail_radius: .25["*"](radius)})]);
        "31";
        self._sour = sour;
        "32";
        self._start_sour = (sour === null) ? null : (function() {
            var ρσ_Iter = sour, ρσ_Result = [], elem;
            ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === "function") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));
            for (var ρσ_Index of ρσ_Iter) {
                elem = ρσ_Index;
                ρσ_Result.push(elem);
            }
            ρσ_Result = ρσ_list_constructor(ρσ_Result);
            return ρσ_Result;
        })();
        "33";
        self._start_position = start_position;
        "34";
        self._is_moving = false;
    };
    if (!Comet.prototype.__init__.__defaults__) Object.defineProperties(Comet.prototype.__init__, {
        __defaults__ : {value: {sour:null}},
        __handles_kwarg_interpolation__ : {value: true},
        __argnames__ : {value: ["start_position", "radius", "colour", "sour"]},
        __module__ : {value: null}
    });
    Comet.__argnames__ = Comet.prototype.__init__.__argnames__;
    Comet.__handles_kwarg_interpolation__ = Comet.prototype.__init__.__handles_kwarg_interpolation__;
    Comet.prototype.update_real_motion_by = async function update_real_motion_by(M, y_offset, dt) {
        var self = this;
        var ρσ_ls, r, bracket, buff;
        "37";
        if (!self._is_moving) {
            "38";
            return;
        }
        "40";
        r = ρσ_getitem(self._sour, 1);
        "41";
        bracket = r["-"](1["*"](2)["*"](M));
        "42";
        buff = ρσ_list_decorate([ 0, 0, 0, 0, 0, 0 ]);
        "43";
        ρσ_setitem(buff, 1, ρσ_getitem(self._sour, 1)["+"](.5["*"](dt)["*"](ρσ_getitem(self._sour, 4))));
        "44";
        ρσ_setitem(buff, 2, ρσ_getitem(self._sour, 2)["+"](.5["*"](dt)["*"](ρσ_getitem(self._sour, 5))));
        "45";
        ρσ_setitem(buff, 3, ρσ_getitem(self._sour, 3)["-"](1["*"](.5)["*"](dt)["*"](M)["/"](r)["/"](Math.pow(bracket, 2))["*"](ρσ_getitem(self._sour, 3))["*"](ρσ_getitem(self._sour, 4))));
        "46";
        ρσ_setitem(buff, 4, ρσ_getitem(self._sour, 4)["+"](.5["*"](dt)["*"](1["-u"]()["*"](M)["*"](bracket)["/"](Math.pow(r, 3))["*"](Math.pow(ρσ_getitem(self._sour, 3), 2))["+"](M["/"](r)["/"](bracket)["*"](Math.pow(ρσ_getitem(self._sour, 4), 2)))["+"](bracket["*"](Math.pow(ρσ_getitem(self._sour, 5), 2))))));
        "49";
        ρσ_setitem(buff, 5, ρσ_getitem(self._sour, 5)["-"](1["*"](.5)["*"](dt)["*"](2)["/"](r)["*"](ρσ_getitem(self._sour, 3))["*"](ρσ_getitem(self._sour, 5))));
        "51";
        ρσ_setitem(self._sour, 0, ρσ_getitem(self._sour, 0)["+"](dt["*"](ρσ_getitem(buff, 3))));
        "52";
        ρσ_setitem(self._sour, 1, ρσ_getitem(self._sour, 1)["+"](dt["*"](ρσ_getitem(buff, 4))));
        "53";
        ρσ_setitem(self._sour, 2, ρσ_getitem(self._sour, 2)["+"](dt["*"](ρσ_getitem(buff, 5))));
        "54";
        ρσ_setitem(self._sour, 3, ρσ_getitem(self._sour, 3)["+"](1["-u"]()["*"](dt)["*"](M)["/"](r)["/"](Math.pow(bracket, 2))["*"](ρσ_getitem(buff, 3))["*"](ρσ_getitem(buff, 4))));
        "55";
        ρσ_setitem(self._sour, 4, ρσ_getitem(self._sour, 4)["+"](dt["*"](1["-u"]()["*"](M)["*"](bracket)["/"](Math.pow(r, 3))["*"](Math.pow(ρσ_getitem(buff, 3), 2))["+"](M["/"](r)["/"](bracket)["*"](Math.pow(ρσ_getitem(buff, 4), 2)))["+"](bracket["*"](Math.pow(ρσ_getitem(buff, 5), 2))))));
        "57";
        ρσ_setitem(self._sour, 5, ρσ_getitem(self._sour, 5)["+"](1["-u"]()["*"](dt)["*"](2)["/"](r)["*"](ρσ_getitem(buff, 3))["*"](ρσ_getitem(buff, 5))));
        "58";
        self._sphere.pos = vec(ρσ_getitem(self._sour, 1)["*"](cos(ρσ_getitem(self._sour, 2))), y_offset, ρσ_getitem(self._sour, 1)["*"](sin(ρσ_getitem(self._sour, 2))));
    };
    if (!Comet.prototype.update_real_motion_by.__argnames__) Object.defineProperties(Comet.prototype.update_real_motion_by, {
        __argnames__ : {value: ["M", "y_offset", "dt"]},
        __module__ : {value: null}
    });
    Comet.prototype.update_by = async function update_by(M, dt) {
        var self = this;
        var ρσ_ls, buff;
        "61";
        if (!self._is_moving) {
            "62";
            return;
        }
        "64";
        buff = ρσ_list_decorate([ 0, 0, 0, 0 ]);
        "65";
        ρσ_setitem(buff, 0, ρσ_getitem(self._sour, 0)["+"](.5["*"](dt)["*"](ρσ_getitem(self._sour, 2))));
        "66";
        ρσ_setitem(buff, 1, ρσ_getitem(self._sour, 1)["+"](.5["*"](dt)["*"](ρσ_getitem(self._sour, 3))));
        "67";
        ρσ_setitem(buff, 2, ρσ_getitem(self._sour, 2)["+"](.5["*"](dt)["*"](M["/"](ρσ_getitem(self._sour, 0))["/"](ρσ_getitem(self._sour, 0)["-"](1["*"](2)["*"](M)))["*"](Math.pow(ρσ_getitem(self._sour, 2), 2))["+"](ρσ_getitem(self._sour, 0)["-"](1["*"](2)["*"](M))["*"](Math.pow(ρσ_getitem(self._sour, 3), 2))))));
        "70";
        ρσ_setitem(buff, 3, ρσ_getitem(self._sour, 3)["-"](1["*"](.5)["*"](dt)["*"](2)["/"](ρσ_getitem(self._sour, 0))["*"](ρσ_getitem(self._sour, 2))["*"](ρσ_getitem(self._sour, 3))));
        "72";
        ρσ_setitem(self._sour, 0, ρσ_getitem(self._sour, 0)["+"](dt["*"](ρσ_getitem(buff, 2))));
        "73";
        ρσ_setitem(self._sour, 1, ρσ_getitem(self._sour, 1)["+"](dt["*"](ρσ_getitem(buff, 3))));
        "74";
        ρσ_setitem(self._sour, 2, ρσ_getitem(self._sour, 2)["+"](dt["*"](M["/"](ρσ_getitem(buff, 0))["/"](ρσ_getitem(buff, 0)["-"](1["*"](2)["*"](M)))["*"](Math.pow(ρσ_getitem(buff, 2), 2))["+"](ρσ_getitem(buff, 0)["-"](1["*"](2)["*"](M))["*"](Math.pow(ρσ_getitem(buff, 3), 2))))));
        "75";
        ρσ_setitem(self._sour, 3, ρσ_getitem(self._sour, 3)["+"](1["-u"]()["*"](dt)["*"](2)["/"](ρσ_getitem(buff, 0))["*"](ρσ_getitem(buff, 2))["*"](ρσ_getitem(buff, 3))));
        "76";
        self._sphere.pos = vec(ρσ_getitem(self._sour, 0)["*"](cos(ρσ_getitem(self._sour, 1))), sqrt(8["*"](M)["*"](ρσ_getitem(self._sour, 0))["-"](1["*"](16)["*"](Math.pow(M, 2)))), ρσ_getitem(self._sour, 0)["*"](sin(ρσ_getitem(self._sour, 1))));
    };
    if (!Comet.prototype.update_by.__argnames__) Object.defineProperties(Comet.prototype.update_by, {
        __argnames__ : {value: ["M", "dt"]},
        __module__ : {value: null}
    });
    Comet.prototype.r = async function r() {
        var self = this;
        "80";
        return sqrt(self._sphere.pos.x["*"](self._sphere.pos.x)["+"](self._sphere.pos.z["*"](self._sphere.pos.z)));
    };
    if (!Comet.prototype.r.__module__) Object.defineProperties(Comet.prototype.r, {
        __module__ : {value: null}
    });
    Comet.prototype.reset = async function reset() {
        var self = this;
        "83";
        self._sphere.clear_trail();
        "84";
        self._sphere.pos = self._start_position;
        "85";
        self._sour = (self._sour === null) ? null : (function() {
            var ρσ_Iter = self._start_sour, ρσ_Result = [], elem;
            ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === "function") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));
            for (var ρσ_Index of ρσ_Iter) {
                elem = ρσ_Index;
                ρσ_Result.push(elem);
            }
            ρσ_Result = ρσ_list_constructor(ρσ_Result);
            return ρσ_Result;
        })();
    };
    if (!Comet.prototype.reset.__module__) Object.defineProperties(Comet.prototype.reset, {
        __module__ : {value: null}
    });
    Comet.prototype.visibility_is = async function visibility_is(checked) {
        var self = this;
        "88";
        self._sphere.visible = checked;
    };
    if (!Comet.prototype.visibility_is.__argnames__) Object.defineProperties(Comet.prototype.visibility_is, {
        __argnames__ : {value: ["checked"]},
        __module__ : {value: null}
    });
    Comet.prototype.follow = async function follow(comet, y_offset) {
        var self = this;
        "91";
        if (!self._is_moving) {
            "92";
            return;
        }
        "94";
        self._sphere.pos = (await comet.pos());
        "95";
        self._sphere.pos.y = y_offset;
    };
    if (!Comet.prototype.follow.__argnames__) Object.defineProperties(Comet.prototype.follow, {
        __argnames__ : {value: ["comet", "y_offset"]},
        __module__ : {value: null}
    });
    Comet.prototype.pos = async function pos() {
        var self = this;
        "98";
        return self._sphere.pos;
    };
    if (!Comet.prototype.pos.__module__) Object.defineProperties(Comet.prototype.pos, {
        __module__ : {value: null}
    });
    Comet.prototype.leave_trail_is = async function leave_trail_is(checked) {
        var self = this;
        "101";
        if (!checked) {
            "102";
            self._sphere.clear_trail();
        }
        "103";
        self._sphere.make_trail = checked;
    };
    if (!Comet.prototype.leave_trail_is.__argnames__) Object.defineProperties(Comet.prototype.leave_trail_is, {
        __argnames__ : {value: ["checked"]},
        __module__ : {value: null}
    });
    Comet.prototype.modify_start_position = async function modify_start_position(value, sour) {
        var self = this;
        "106";
        if (self._is_moving) {
            "107";
            return;
        }
        "109";
        self._sphere.pos = value;
        "110";
        self._start_position = value;
        "111";
        self._sour = sour;
        "112";
        self._start_sour = sour;
    };
    if (!Comet.prototype.modify_start_position.__argnames__) Object.defineProperties(Comet.prototype.modify_start_position, {
        __argnames__ : {value: ["value", "sour"]},
        __module__ : {value: null}
    });
    Comet.prototype.stop_movement = async function stop_movement() {
        var self = this;
        "115";
        self._is_moving = false;
    };
    if (!Comet.prototype.stop_movement.__module__) Object.defineProperties(Comet.prototype.stop_movement, {
        __module__ : {value: null}
    });
    Comet.prototype.start_movement = async function start_movement() {
        var self = this;
        "118";
        self._is_moving = true;
    };
    if (!Comet.prototype.start_movement.__module__) Object.defineProperties(Comet.prototype.start_movement, {
        __module__ : {value: null}
    });
    Comet.prototype.__repr__ = async function __repr__() {
                return "<"["+"](__name__)["+"](".")["+"](this.constructor.name)["+"](" #")["+"](this.ρσ_object_id)["+"](">");
    };
    Comet.prototype.__str__ = async function __str__() {
        return this.__repr__();
    };
    Object.defineProperty(Comet.prototype, "__bases__", {value: []});













    "121";
    function SchwarzschildSpaceTime() {;
    }
    SchwarzschildSpaceTime.prototype.__init__ = async function __init__() {
        var self = this;
        var mass = ( 0 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true) ? undefined : arguments[0];
        var grid_y_offset = (arguments[1] === undefined || ( 1 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true)) ? __init__.__defaults__.grid_y_offset : arguments[1];
        var ρσ_kwargs_obj = arguments[arguments.length["-"](1)];
        if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== "object" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};
        if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, "grid_y_offset")){
            grid_y_offset = ρσ_kwargs_obj.grid_y_offset;
        }
        "123";
        self._mass = mass;
        "124";
        self._grid_y_offset = grid_y_offset;
        "125";
        self._surface = ρσ_list_decorate([]);
        "126";
        self._grid = ρσ_list_decorate([]);
    };
    if (!SchwarzschildSpaceTime.prototype.__init__.__defaults__) Object.defineProperties(SchwarzschildSpaceTime.prototype.__init__, {
        __defaults__ : {value: {grid_y_offset:1["-u"]()["*"](10)}},
        __handles_kwarg_interpolation__ : {value: true},
        __argnames__ : {value: ["mass", "grid_y_offset"]},
        __module__ : {value: null}
    });
    SchwarzschildSpaceTime.__argnames__ = SchwarzschildSpaceTime.prototype.__init__.__argnames__;
    SchwarzschildSpaceTime.__handles_kwarg_interpolation__ = SchwarzschildSpaceTime.prototype.__init__.__handles_kwarg_interpolation__;
    SchwarzschildSpaceTime.prototype.r_min_r_max = async function r_min_r_max() {
        var self = this;
        var ρσ_ls, r_min, r_max;
        "129";
        r_min = 2["*"](self._mass)["+"](.1);
        "130";
        r_max = 13["*"](self._mass);
        "131";
        return [r_min, r_max];
    };
    if (!SchwarzschildSpaceTime.prototype.r_min_r_max.__module__) Object.defineProperties(SchwarzschildSpaceTime.prototype.r_min_r_max, {
        __module__ : {value: null}
    });
    SchwarzschildSpaceTime.prototype.draw_grid = async function draw_grid() {
        var self = this;
        var ρσ_ls, ρσ_unpack, _, r_max, i;
        "134";
        ρσ_unpack = (await self.r_min_r_max());
ρσ_unpack = ρσ_unpack_asarray(2, ρσ_unpack);
        _ = ρσ_unpack[0];
        r_max = ρσ_unpack[1];
        "135";
        for (var ρσ_Index1 = 0; ρσ_Index1["<"](20); ρσ_Index1++) {
            i = ρσ_Index1;
            "136";
            self._grid=self._grid["+"](ρσ_list_decorate([ ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1["-u"]()["*"](r_max)["+"](i["*"](2)["*"](r_max)["/"](19)), self._grid_y_offset, 1["-u"]()["*"](r_max)), vec(1["-u"]()["*"](r_max)["+"](i["*"](2)["*"](r_max)["/"](19)), self._grid_y_offset, r_max) ]), color: color.green, radius: .2})]) ]));
            "140";
            self._grid=self._grid["+"](ρσ_list_decorate([ ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1["-u"]()["*"](r_max), self._grid_y_offset, 1["-u"]()["*"](r_max)["+"](i["*"](2)["*"](r_max)["/"](19))), vec(r_max, self._grid_y_offset, 1["-u"]()["*"](r_max)["+"](i["*"](2)["*"](r_max)["/"](19))) ]), color: color.green, radius: .2})]) ]));
        }
    };
    if (!SchwarzschildSpaceTime.prototype.draw_grid.__module__) Object.defineProperties(SchwarzschildSpaceTime.prototype.draw_grid, {
        __module__ : {value: null}
    });
    SchwarzschildSpaceTime.prototype.mass = async function mass() {
        var self = this;
        "146";
        return self._mass;
    };
    if (!SchwarzschildSpaceTime.prototype.mass.__module__) Object.defineProperties(SchwarzschildSpaceTime.prototype.mass, {
        __module__ : {value: null}
    });
    SchwarzschildSpaceTime.prototype.grid_y_offset = async function grid_y_offset() {
        var self = this;
        "149";
        return self._grid_y_offset;
    };
    if (!SchwarzschildSpaceTime.prototype.grid_y_offset.__module__) Object.defineProperties(SchwarzschildSpaceTime.prototype.grid_y_offset, {
        __module__ : {value: null}
    });
    SchwarzschildSpaceTime.prototype.z_as_function_of = async function z_as_function_of(r) {
        var self = this;
        "152";
        return sqrt(8["*"](self._mass)["*"](r)["-"](1["*"](16)["*"](self._mass)["*"](self._mass)));
    };
    if (!SchwarzschildSpaceTime.prototype.z_as_function_of.__argnames__) Object.defineProperties(SchwarzschildSpaceTime.prototype.z_as_function_of, {
        __argnames__ : {value: ["r"]},
        __module__ : {value: null}
    });
    SchwarzschildSpaceTime.prototype.draw = async function draw() {
        var self = this;
        var ρσ_ls, ρσ_unpack, r_min, r_max, r, t, c, j, i, phi;
        "158";
        ρσ_unpack = (await self.r_min_r_max());
ρσ_unpack = ρσ_unpack_asarray(2, ρσ_unpack);
        r_min = ρσ_unpack[0];
        r_max = ρσ_unpack[1];
        "159";
        for (var ρσ_Index2 = 0; ρσ_Index2["<"](15); ρσ_Index2++) {
            i = ρσ_Index2;
            "160";
            r = r_min["+"](i["*"](r_max["-"](1["*"](r_min)))["/"](14));
            "161";
            t = 0;
            "162";
            c = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: vec(r["*"](cos(t)), (await self.z_as_function_of(r)), r["*"](sin(t))), color: color.yellow, radius: .2})]);
            "163";
            for (var ρσ_Index3 = 0; ρσ_Index3["<"](200); ρσ_Index3++) {
                j = ρσ_Index3;
                "164";
                t=t["+"](2["*"](pi)["/"](200));
                "165";
                c.append(vec(r["*"](cos(t)), (await self.z_as_function_of(r)), r["*"](sin(t))));
            }
            "166";
            self._surface.append(c);
        }
        "168";
        for (var ρσ_Index4 = 0; ρσ_Index4["<"](12); ρσ_Index4++) {
            i = ρσ_Index4;
            "169";
            phi = i["*"](2)["*"](pi)["/"](12);
            "170";
            r = r_min;
            "171";
            c = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: vec(r["*"](cos(phi)), (await self.z_as_function_of(r)), r["*"](sin(phi))), color: color.yellow, radius: .2})]);
            "172";
            for (var ρσ_Index5 = 0; ρσ_Index5["<"](100); ρσ_Index5++) {
                j = ρσ_Index5;
                "173";
                r=r["+"](r_max["-"](1["*"](r_min))["/"](100));
                "174";
                c.append(vec(r["*"](cos(phi)), (await self.z_as_function_of(r)), r["*"](sin(phi))));
            }
            "175";
            self._surface.append(c);
        }
    };
    if (!SchwarzschildSpaceTime.prototype.draw.__module__) Object.defineProperties(SchwarzschildSpaceTime.prototype.draw, {
        __module__ : {value: null}
    });
    SchwarzschildSpaceTime.prototype.modify_grid = async function modify_grid(thickness) {
        var self = this;
        var ρσ_ls, element;
        "178";
        var ρσ_Iter6 = self._surface;
        ρσ_Iter6 = ((typeof ρσ_Iter6[Symbol.iterator] === "function") ? (ρσ_Iter6 instanceof Map ? ρσ_Iter6.keys() : ρσ_Iter6) : Object.keys(ρσ_Iter6));
        for (var ρσ_Index6 of ρσ_Iter6) {
            element = ρσ_Index6;
            "179";
            element.radius = thickness;
        }
        "180";
        var ρσ_Iter7 = self._grid;
        ρσ_Iter7 = ((typeof ρσ_Iter7[Symbol.iterator] === "function") ? (ρσ_Iter7 instanceof Map ? ρσ_Iter7.keys() : ρσ_Iter7) : Object.keys(ρσ_Iter7));
        for (var ρσ_Index7 of ρσ_Iter7) {
            element = ρσ_Index7;
            "181";
            element.radius = thickness;
        }
    };
    if (!SchwarzschildSpaceTime.prototype.modify_grid.__argnames__) Object.defineProperties(SchwarzschildSpaceTime.prototype.modify_grid, {
        __argnames__ : {value: ["thickness"]},
        __module__ : {value: null}
    });
    SchwarzschildSpaceTime.prototype.grid_visibility_is = async function grid_visibility_is(checked) {
        var self = this;
        var ρσ_ls, line;
        "184";
        var ρσ_Iter8 = self._grid;
        ρσ_Iter8 = ((typeof ρσ_Iter8[Symbol.iterator] === "function") ? (ρσ_Iter8 instanceof Map ? ρσ_Iter8.keys() : ρσ_Iter8) : Object.keys(ρσ_Iter8));
        for (var ρσ_Index8 of ρσ_Iter8) {
            line = ρσ_Index8;
            "185";
            line.visible = checked;
        }
    };
    if (!SchwarzschildSpaceTime.prototype.grid_visibility_is.__argnames__) Object.defineProperties(SchwarzschildSpaceTime.prototype.grid_visibility_is, {
        __argnames__ : {value: ["checked"]},
        __module__ : {value: null}
    });
    SchwarzschildSpaceTime.prototype.cone_visibility_is = async function cone_visibility_is(checked) {
        var self = this;
        var ρσ_ls, line;
        "188";
        var ρσ_Iter9 = self._surface;
        ρσ_Iter9 = ((typeof ρσ_Iter9[Symbol.iterator] === "function") ? (ρσ_Iter9 instanceof Map ? ρσ_Iter9.keys() : ρσ_Iter9) : Object.keys(ρσ_Iter9));
        for (var ρσ_Index9 of ρσ_Iter9) {
            line = ρσ_Index9;
            "189";
            line.visible = checked;
        }
    };
    if (!SchwarzschildSpaceTime.prototype.cone_visibility_is.__argnames__) Object.defineProperties(SchwarzschildSpaceTime.prototype.cone_visibility_is, {
        __argnames__ : {value: ["checked"]},
        __module__ : {value: null}
    });
    SchwarzschildSpaceTime.prototype.__repr__ = async function __repr__() {
                return "<"["+"](__name__)["+"](".")["+"](this.constructor.name)["+"](" #")["+"](this.ρσ_object_id)["+"](">");
    };
    SchwarzschildSpaceTime.prototype.__str__ = async function __str__() {
        return this.__repr__();
    };
    Object.defineProperty(SchwarzschildSpaceTime.prototype, "__bases__", {value: []});











    "192";
    _GS_1 = new SchwarzschildSpaceTime;
    ρσ_interpolate_kwargs.call(_GS_1, _GS_1.__init__, [ρσ_desugar_kwargs({mass: 5})]);
    schwarzschild = _GS_1;
    "193";
    (await schwarzschild.draw());
    "194";
    (await schwarzschild.draw_grid());
    "195";
    _GS_1 = new Sun;
    ρσ_interpolate_kwargs.call(_GS_1, _GS_1.__init__, [ρσ_desugar_kwargs({position: vec(0, 2, 0), radius: 2["*"]((await schwarzschild.mass()))})]);
    sun = _GS_1;
    "197";
    ρσ_unpack = (await schwarzschild.r_min_r_max());
ρσ_unpack = ρσ_unpack_asarray(2, ρσ_unpack);
    r_min = ρσ_unpack[0];
    r_max = ρσ_unpack[1];
    "198";
    start_r = r_max["-"](1["*"](5));
    "199";
    position = vec(start_r, (await schwarzschild.z_as_function_of(start_r)), 0);
    "200";
    _GS_1 = new Comet;
    ρσ_interpolate_kwargs.call(_GS_1, _GS_1.__init__, [ρσ_desugar_kwargs({start_position: position, radius: 1.25, colour: color.cyan, sour: ρσ_list_decorate([ start_r, 0, 1["-u"]()["*"](25.2), .49 ])})]);
    comet = _GS_1;
    "201";
    _GS_1 = new Comet;
    (await _GS_1.__init__(vec(position.x, (await schwarzschild.grid_y_offset()), position.z), 1.25, color.red));
    flat_motion_comet = _GS_1;
    "205";
    async function toggle_grid(event) {
        "206";
        (await schwarzschild.grid_visibility_is(event.checked));
    };
    if (!toggle_grid.__argnames__) Object.defineProperties(toggle_grid, {
        __argnames__ : {value: ["event"]},
        __module__ : {value: null}
    });

    "208";
    async function toggle_sun(event) {
        "209";
        (await sun.visibility_is(event.checked));
    };
    if (!toggle_sun.__argnames__) Object.defineProperties(toggle_sun, {
        __argnames__ : {value: ["event"]},
        __module__ : {value: null}
    });

    "211";
    async function toggle_cone(event) {
        "212";
        (await schwarzschild.cone_visibility_is(event.checked));
    };
    if (!toggle_cone.__argnames__) Object.defineProperties(toggle_cone, {
        __argnames__ : {value: ["event"]},
        __module__ : {value: null}
    });

    "214";
    async function toggle_flat_motion(event) {
        "215";
        (await flat_motion_comet.visibility_is(event.checked));
        "216";
        (await flat_motion_comet.reset());
    };
    if (!toggle_flat_motion.__argnames__) Object.defineProperties(toggle_flat_motion, {
        __argnames__ : {value: ["event"]},
        __module__ : {value: null}
    });

    "219";
    async function toggle_trail(event) {
        "220";
        (await comet.leave_trail_is(event.checked));
        "221";
        (await flat_motion_comet.leave_trail_is(event.checked));
    };
    if (!toggle_trail.__argnames__) Object.defineProperties(toggle_trail, {
        __argnames__ : {value: ["event"]},
        __module__ : {value: null}
    });

    "224";
    display.append_to_caption("\n");
    "225";
    _ = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({text: "Cone", bind: toggle_cone, checked: true})]);
    "226";
    _ = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({text: "Grid", bind: toggle_grid, checked: true})]);
    "227";
    _ = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({text: "Central mass", bind: toggle_sun, checked: true})]);
    "228";
    _ = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({text: "Flat motion", bind: toggle_flat_motion, checked: true})]);
    "229";
    _ = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({text: "Leave trail", bind: toggle_trail, checked: true})]);
    "233";
    async function top_view(b) {
        "234";
        display.forward = vec(0, 1["-u"]()["*"](1), 0);
        "235";
        display.up = vec(1["-u"]()["*"](1), 0, 0);
        "236";
        display.range = 1.5["*"](r_max);
    };
    if (!top_view.__argnames__) Object.defineProperties(top_view, {
        __argnames__ : {value: ["b"]},
        __module__ : {value: null}
    });

    "238";
    async function flip_up(b) {
        "239";
        display.up = vec(0, 1, 0);
    };
    if (!flip_up.__argnames__) Object.defineProperties(flip_up, {
        __argnames__ : {value: ["b"]},
        __module__ : {value: null}
    });

    "241";
    async function flip_down(b) {
        "242";
        display.up = vec(0, 1["-u"]()["*"](1), 0);
    };
    if (!flip_down.__argnames__) Object.defineProperties(flip_down, {
        __argnames__ : {value: ["b"]},
        __module__ : {value: null}
    });

    "245";
    display.append_to_caption("\n\n");
    "246";
    _ = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: "Top view", bind: top_view})]);
    "247";
    _ = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: "Flip up", bind: flip_up})]);
    "248";
    _ = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: "Flip down", bind: flip_down})]);
    "250";
    async function modify_grid_thickness(event) {
        "251";
        (await schwarzschild.modify_grid(event.value));
    };
    if (!modify_grid_thickness.__argnames__) Object.defineProperties(modify_grid_thickness, {
        __argnames__ : {value: ["event"]},
        __module__ : {value: null}
    });

    "253";
    async function modify_start_position(event) {
        var ρσ_ls, pos;
        "254";
        (await flat_motion_comet.reset());
        "255";
        (await comet.reset());
        "257";
        pos = vec(event.value, (await schwarzschild.z_as_function_of(event.value)), 0);
        "258";
        (await comet.modify_start_position(pos, ρσ_list_decorate([ pos.x, 0, 1["-u"]()["*"](25.2), .49 ])));
    };
    if (!modify_start_position.__argnames__) Object.defineProperties(modify_start_position, {
        __argnames__ : {value: ["event"]},
        __module__ : {value: null}
    });

    "262";
    display.append_to_caption("\n\nInitial radius:");
    "263";
    ρσ_interpolate_kwargs.call(this, slider, [ρσ_desugar_kwargs({min: r_min["+"](.1), max: r_max["-"](1["*"](.1)), value: start_r, step: .1, bind: modify_start_position})]);
    "264";
    display.append_to_caption("\n\nGrid thickness");
    "265";
    ρσ_interpolate_kwargs.call(this, slider, [ρσ_desugar_kwargs({min: .1, max: .5, value: .2, bind: modify_grid_thickness})]);
    "268";
    async function restart(event) {
        "269";
        (await comet.reset());
        "270";
        (await flat_motion_comet.reset());
        "273";
        (await comet.start_movement());
        "274";
        (await flat_motion_comet.start_movement());
    };
    if (!restart.__argnames__) Object.defineProperties(restart, {
        __argnames__ : {value: ["event"]},
        __module__ : {value: null}
    });

    "278";
    display.bind("click", restart);
    "280";
    MathJax.Hub.Queue(ρσ_list_decorate([ "Typeset", MathJax.Hub ]));
    "282";
    delta_t = .01;
    "283";
    while (true) {
        "284";
        (await rate(1["/"](delta_t)));
        "285";
        if (r_min["<"](ρσ_cond_temp = (await comet.r())) && ρσ_cond_temp["<"](r_max)) {
            "286";
            (await comet.update_by((await schwarzschild.mass()), delta_t));
            "287";
            (await flat_motion_comet.follow(comet, (await schwarzschild.grid_y_offset())));
            "288";
        } else {
            "289";
            (await comet.stop_movement());
        }
    }
};
if (!__main__.__module__) Object.defineProperties(__main__, {
    __module__ : {value: null}
});

;$(function(){ window.__context = { glowscript_container: $("#glowscript").removeAttr("id") }; __main__() })})()
// END JAVASCRIPT

//--><!]]></script>
</div>
